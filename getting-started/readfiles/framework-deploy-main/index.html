<!DOCTYPE html>
  
  
  
  
   <html class="no-js"> 

  <head lang="en-us">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1,maximum-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=10" />
    <title> - KDF</title>
    <meta name="generator" content="Hugo 0.48" />

    
    <meta name="description" content="Kubernetes Development Framework (KDF)">
    
    <link rel="canonical" href="https://kdf.csco.cloud/getting-started/readfiles/framework-deploy-main/">
    
    <meta name="author" content="SSO Arch Team">
    

    <meta property="og:url" content="https://kdf.csco.cloud/getting-started/readfiles/framework-deploy-main/">
    <meta property="og:title" content="KDF">
    <meta property="og:image" content="https://kdf.csco.cloud/images/logo.png">
    <meta name="apple-mobile-web-app-title" content="KDF">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <link rel="shortcut icon" type="image/x-icon" href="https://kdf.csco.cloud/images/favicon.ico">
    <link rel="icon" type="image/x-icon" href="https://kdf.csco.cloud/images/favicon.ico">

    <style>
      @font-face {
        font-family: 'Icon';
        src: url('https://kdf.csco.cloud/fonts/icon.eot');
        src: url('https://kdf.csco.cloud/fonts/icon.eot')
               format('embedded-opentype'),
             url('https://kdf.csco.cloud/fonts/icon.woff')
               format('woff'),
             url('https://kdf.csco.cloud/fonts/icon.ttf')
               format('truetype'),
             url('https://kdf.csco.cloud/fonts/icon.svg')
               format('svg');
        font-weight: normal;
        font-style: normal;
      }
    </style>

    <link rel="stylesheet" href="https://kdf.csco.cloud/stylesheets/application.css">
    <link rel="stylesheet" href="https://kdf.csco.cloud/stylesheets/temporary.css">
    <link rel="stylesheet" href="https://kdf.csco.cloud/stylesheets/palettes.css">
    <link rel="stylesheet" href="https://kdf.csco.cloud/stylesheets/highlight/highlight.css">

    
    
    
    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Ubuntu:400,700|Ubuntu&#43;Mono">
    <style>
      body, input {
        font-family: 'Ubuntu', Helvetica, Arial, sans-serif;
      }
      pre, code {
        font-family: 'Ubuntu Mono', 'Courier New', 'Courier', monospace;
      }
    </style>

    
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    
    <script src="https://kdf.csco.cloud/javascripts/modernizr.js"></script>

    

  </head>
  <body class="palette-primary-red palette-accent-teal">



	
	


<div class="backdrop">
	<div class="backdrop-paper"></div>
</div>

<input class="toggle" type="checkbox" id="toggle-drawer">
<input class="toggle" type="checkbox" id="toggle-search">
<label class="toggle-button overlay" for="toggle-drawer"></label>

<header class="header">
	<nav aria-label="Header">
  <div class="bar default">
    <div class="button button-menu" role="button" aria-label="Menu">
      <label class="toggle-button icon icon-menu" for="toggle-drawer">
        <span></span>
      </label>
    </div>
    <div class="stretch">
      <div class="title">
        
      </div>
    </div>

    

    
    <div class="button button-github" role="button" aria-label="GitHub">
      <a href="https://github.com/cisco-sso" title="@cisco-sso on GitHub" target="_blank" class="toggle-button icon icon-github"></a>
    </div>
    
    
        
  </div>
  <div class="bar search">
    <div class="button button-close" role="button" aria-label="Close">
      <label class="toggle-button icon icon-back" for="toggle-search"></label>
    </div>
    <div class="stretch">
      <div class="field">
        <input class="query" type="text" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck>
      </div>
    </div>
    <div class="button button-reset" role="button" aria-label="Search">
      <button class="toggle-button icon icon-close" id="reset-search"></button>
    </div>
  </div>
</nav>
</header>

<main class="main">
	<div class="drawer">
		<nav aria-label="Navigation">
  <a href="https://github.com/cisco-sso/kdf" class="project">
    <div class="banner">
      
        <div class="logo">
          <img src="https://kdf.csco.cloud/images/logo.png">
        </div>
      
      <div class="name">
        <strong>KDF <span class="version">0.1.0</span></strong>
        
          <br>
          cisco-sso/kdf
        
      </div>
    </div>
  </a>

  <div class="scrollable">
    <div class="wrapper">
      
        <ul class="repo">
          <li class="repo-stars">
            <a href="https://github.com/cisco-sso/kdf/stargazers" target="_blank" title="Stargazers" data-action="star">
              <i class="icon icon-star"></i> Stars
              <span class="count">&ndash;</span>
            </a>
          </li>
          <li class="repo-fork">
            <a href="https://github.com/cisco-sso/kdf/fork" target="_blank" title="Fork" data-action="fork">
              <i class="icon icon-fork"></i>Fork on GitHub
	    </a>
          </li>
        </ul>
        <hr>
      

      <div class="toc">
        
        <ul>
          




<li>
  
    



<a  title="About" href="https://kdf.csco.cloud/">
	
	About
</a>



  
</li>



<li>
  
    <span class="section">Getting Started</span>
    <ul>
      
        
        



<a  title="Linux" href="https://kdf.csco.cloud/getting-started/linux/">
	
	Linux
</a>



      
        
        



<a  title="Mac" href="https://kdf.csco.cloud/getting-started/mac/">
	
	Mac
</a>



      
        
        



<a  title="Windows" href="https://kdf.csco.cloud/getting-started/windows/">
	
	Windows
</a>



      
    </ul>
  
</li>



<li>
  
    



<a  title="Patterns" href="https://kdf.csco.cloud/patterns/">
	
	Patterns
</a>



  
</li>



<li>
  
    



<a  title="Tools" href="https://kdf.csco.cloud/tools/">
	
	Tools
</a>



  
</li>



<li>
  
    



<a  title="Deployment Packages" href="https://kdf.csco.cloud/deployment-packages/">
	
	Deployment Packages
</a>



  
</li>



<li>
  
    



<a  title="Kubernetes" href="https://kdf.csco.cloud/kubernetes/">
	
	Kubernetes
</a>



  
</li>



<li>
  
    



<a  title="Training" href="https://kdf.csco.cloud/training/">
	
	Training
</a>



  
</li>



<li>
  
    



<a  title="Backlog" href="https://kdf.csco.cloud/backlog/">
	
	Backlog
</a>



  
</li>



<li>
  
    



<a  title="Team" href="https://kdf.csco.cloud/team/">
	
	Team
</a>



  
</li>


        </ul>
        

        
        <hr>
        <span class="section">Contact</span>
        
        <ul>
          

          
          <li>
            <a href="https://github.com/cisco-sso" target="_blank" title="@cisco-sso on GitHub">
              @cisco-sso on GitHub
            </a>
          </li>
          

          
        </ul>
        
      </div>
    </div>
  </div>
</nav>

	</div>

	<article class="article">
		<div class="wrapper">
			<h1> </h1>

			

<p>(inside your KDK container)</p>

<h3 id="clone-the-framework-deploy-https-github-com-cisco-sso-framework-deploy-repo-using-git">Clone the <a href="https://github.com/cisco-sso/framework-deploy">framework-deploy</a> repo using git.</h3>

<pre><code class="language-bash">#### Run this command if you have configured your GitHub account for public key SSH.
git clone git@github.com:cisco-sso/framework-deploy.git

#### (OR) Run this command if you have not configured GitHub for public key SSH.
git clone https://github.com/cisco-sso/framework-deploy.git
</code></pre>

<h3 id="change-to-the-framework-deploy-directory-and-take-a-look-around">Change to the <code>framework-deploy</code> directory and take a look around.</h3>

<pre><code class="language-bash">cd framework-deploy/
ls -a
</code></pre>

<p>You should see:</p>

<pre><code class="language-bash">.  ..  .envrc  .git  .gitignore  LICENSE  README.md  apps  bin  clusters  ensure-env.sh
</code></pre>

<ul>
<li><code>.envrc</code></li>
</ul>

<p>Upon entering a directory that contains an <code>.envrc</code> file, the <code>direnv</code> tool installed in the KDK container will
automatically source the <code>./.envrc</code> file if it is present.</p>

<p>For example, in the framework-deploy pattern, <code>direnv</code> tunes your shell&rsquo;s environment variables for each cluster
directory into which you change (<code>cd</code>). It is through these environment variables that all of the tools are configured
(e.g. <code>kubectl</code>, <code>docker</code>, <code>helm</code>, etc).</p>

<p>If <code>direnv</code> encounters a <code>.envrc</code> file it has not previously processed, or one that has changed since last seen, <code>direnv</code>
will prompt you to approve the processing of its content.</p>

<pre><code>direnv: error .envrc is blocked. Run `direnv allow` to approve its content.
</code></pre>

<p>At prompts like this, if you&rsquo;re confident that the <code>.envrc</code> file is safe for <code>direnv</code> to process, run <code>direnv allow</code>
to do so.</p>

<ul>
<li><code>.git</code></li>
</ul>

<p>The <code>.git</code> directory holds files that <code>git</code> uses. You will likely never need to interact directly with this directory.</p>

<ul>
<li><code>.gitignore</code></li>
</ul>

<p>The <code>.gitignore</code> file tracks which file names <code>git</code> should ignore when doing <code>git add</code> commands.</p>

<ul>
<li><code>LICENSE</code> and <code>README.md</code></li>
</ul>

<p>These are standard fare license and high level documentation for the framework-deploy project.</p>

<ul>
<li><code>apps</code></li>
</ul>

<p>The <code>apps</code> directory contains template files for the <a href="https://github.com/cisco-sso/mh">mh</a> command. Each &ldquo;app&rdquo; is a template of a Helm chart override.</p>

<ul>
<li><code>bin</code></li>
</ul>

<p>The <code>bin</code> directory contains scripts that simplify specific operations. For example, <code>bin/get-password-grafana.sh</code> is a
helper script that retrieves the auto-generated admin password for <a href="https://grafana.com/">grafana</a> as installed by
framework-deploy.</p>

<ul>
<li><code>clusters</code></li>
</ul>

<p>The <code>clusters</code> directory contains a directory for each Kubernetes cluster you manage with framework-deploy. The
framework-deploy repo contains boilerplate for the <code>docker-for-desktop</code> Kubernetes cluster which was spun up earlier
in this tutorial.</p>

<p>In an internal and private fork of framework-deploy, you can make cluster directories for your own Kubernetes clusters
(e.g. <code>myorg1-dev.example.org</code>). Each cluster directory contains an <code>.envrc</code> (via symlink) that automatically
configures your shell environment (e.g. the <code>KUBECONFIG</code> environment variable).</p>

<p>In the framework-deploy pattern, Kubernetes cluster context name and KUBECONFIG filename are both set to match the
cluster&rsquo;s external FQDN (e.g. <code>myorg1-dev.example.org</code>). This naming convention enables framework-deploy automation to
simplify interactive cluster usage.</p>

<ul>
<li><code>ensure-env.sh</code></li>
</ul>

<p>The <code>ensure-env.sh</code> script ensures presence of all prerequisite shell environment variables and tools. The script is
normally <code>source</code>&lsquo;ed by <code>.envrc</code> files.</p>

<h3 id="allow-direnv-https-direnv-net-to-source-the-envrc-https-github-com-cisco-sso-framework-deploy-blob-master-envrc-file">Allow <a href="https://direnv.net/">direnv</a> to source the <a href="https://github.com/cisco-sso/framework-deploy/blob/master/.envrc">.envrc</a> file.</h3>

<pre><code class="language-bash">direnv allow
</code></pre>

<h3 id="change-to-the-clusters-docker-for-desktop-directory-and-take-a-look-around">Change to the <code>clusters/docker-for-desktop</code> directory and take a look around.</h3>

<pre><code class="language-bash">cd clusters/docker-for-desktop
ls -a
</code></pre>

<p>You should see:</p>

<pre><code class="language-bash">.  ..  .envrc  README.md  mh  vars.yaml
direnv: error .envrc is blocked. Run `direnv allow` to approve its content.
</code></pre>

<ul>
<li><code>.envrc</code></li>
</ul>

<p>The <code>.envrc</code> file in this directory is a symlink to <code>../common/dot.envrc</code>. The <code>dot.envrc</code> file behind the symlink
configures your shell for the current cluster directory name. In this case, that means <code>docker-for-desktop</code></p>

<ul>
<li><code>README.md</code></li>
</ul>

<p>The <code>README.md</code> in this directory contains guidance specific to the <code>docker-for-desktop</code> Kubernetes cluster.</p>

<ul>
<li><code>mh/main.yaml</code></li>
</ul>

<p>The <a href="https://github.com/cisco-sso/mh">mh</a> tool which ships with the KDK container image is capable of managing one or
many Kubernetes namespaces in a single <code>MH_CONFIG</code>.</p>

<p>The <code>mh/main.yaml</code> file inside the <code>mh</code> directory is the <a href="https://github.com/cisco-sso/mh#select-a-mh-config">MH_CONFIG</a>
file for the <code>docker-for-desktop</code> Kubernetes cluster.</p>

<p>This file declares the cluster&rsquo;s Helm Chart releases, <code>mh</code> apps (Helm Chart override templates), and base truth.
Secret base truth is one exception. Secrets should never be committed to framework-deploy nor any fork of it. Any
secrets seen in this boilerplate version of the repo are for illustrative purposes.</p>

<p>Instead of writing secrets into your <code>mh/main.yaml</code>, you may pre-load them as Kubernetes Secrets and make your Helm
Charts use those out of band secrets directly. Another way to manage secrets is to use Helm Charts that generate
secrets into Kubernetes and use them there as needed. Once generated, your Kubernetes user should be able to read them
back out using <code>kubectl</code>.</p>

<ul>
<li><code>vars.yaml</code></li>
</ul>

<p>The <code>vars.yaml</code> file stores some very basic key values for tools like
<a href="https://github.com/cisco-sso/kdk/blob/master/files/usr/local/bin/awake">awake</a> and
<a href="https://yq.readthedocs.io/en/latest/">yq</a> to draw upon. In the framework-deploy pattern, we use <code>vars.yaml</code> to declare
which <a href="http://keybase.io">keybase.io</a> team manages each cluster.</p>

<h3 id="allow-direnv-https-direnv-net-to-source-the-envrc-https-github-com-cisco-sso-framework-deploy-blob-master-clusters-common-dot-envrc-file">Allow <a href="https://direnv.net/">direnv</a> to source the <a href="https://github.com/cisco-sso/framework-deploy/blob/master/clusters/common/dot.envrc">.envrc</a> file.</h3>

<pre><code class="language-bash">direnv allow
</code></pre>

<h3 id="interact-with-kubernetes-using-kubectl-https-kubernetes-io-docs-reference-kubectl-overview">Interact with Kubernetes using <a href="https://kubernetes.io/docs/reference/kubectl/overview/">kubectl</a>.</h3>

<pre><code class="language-bash">kubectl config get-contexts
## CURRENT   NAME                 CLUSTER                      AUTHINFO             NAMESPACE
## *         docker-for-desktop   docker-for-desktop-cluster   docker-for-desktop

kubectl config current-context
## docker-for-desktop

kubectl version
## Client Version: version.Info{Major:&quot;1&quot;, Minor:&quot;11&quot;, GitVersion:&quot;v1.11.1&quot;, GitCommit:&quot;b1b29978270dc22fecc592ac55d903350454310a&quot;, GitTreeState:&quot;clean&quot;, BuildDate:&quot;2018-07-18T11:36:43Z&quot;, GoVersion:&quot;go1.10.3&quot;, Compiler:&quot;gc&quot;, Platform:&quot;darwin/amd64&quot;}
## Server Version: version.Info{Major:&quot;1&quot;, Minor:&quot;10&quot;, GitVersion:&quot;v1.10.3&quot;, GitCommit:&quot;2bba0127d85d5a46ab4b778548be28623b32d0b0&quot;, GitTreeState:&quot;clean&quot;, BuildDate:&quot;2018-05-21T09:05:37Z&quot;, GoVersion:&quot;go1.9.3&quot;, Compiler:&quot;gc&quot;, Platform:&quot;linux/amd64&quot;}

kubectl get nodes
## NAME                 STATUS    ROLES     AGE       VERSION
## docker-for-desktop   Ready     master     1h       v1.10.3

kubectl get statefulsets --all-namespaces
## No resources found.

kubectl get deployments --all-namespaces
## NAMESPACE     NAME          DESIRED   CURRENT   UP-TO-DATE   AVAILABLE   AGE
## docker        compose       1         1         1            1           21h
## docker        compose-api   1         1         1            1           21h
## kube-system   kube-dns      1         1         1            1           21h

kubectl get pod --all-namespaces
## NAMESPACE     NAME                                         READY     STATUS    RESTARTS   AGE
## docker        compose-7447646cf5-gbcrx                     1/1       Running   0          1h
## docker        compose-api-6fbc44c575-gd92f                 1/1       Running   0          1h
## kube-system   etcd-docker-for-desktop                      1/1       Running   1          1h
## kube-system   kube-apiserver-docker-for-desktop            1/1       Running   1          1h
## kube-system   kube-controller-manager-docker-for-desktop   1/1       Running   1          1h
## kube-system   kube-dns-86f4d74b45-snz5s                    3/3       Running   0          1h
## kube-system   kube-proxy-dmqvq                             1/1       Running   0          1h
## kube-system   kube-scheduler-docker-for-desktop            1/1       Running   1          1h
</code></pre>

<h3 id="initialize-helm-tiller-https-docs-helm-sh-glossary-tiller-into-your-local-kubernetes-cluster">Initialize <a href="https://docs.helm.sh/glossary/#tiller">Helm Tiller</a> into your local Kubernetes cluster.</h3>

<pre><code class="language-bash">helm version
## Client: &amp;version.Version{SemVer:&quot;v2.10.0&quot;, GitCommit:&quot;9ad53aac42165a5fadc6c87be0dea6b115f93090&quot;, GitTreeState:&quot;clean&quot;}
## Error: could not find tiller

helm init --wait
## $HELM_HOME has been configured at /home/&lt;you&gt;/.helm.
##
## Tiller (the Helm server-side component) has been installed into your Kubernetes Cluster.
##
## Please note: by default, Tiller is deployed with an insecure 'allow unauthenticated users' policy.
## To prevent this, run `helm init` with the --tiller-tls-verify flag.
## For more information on securing your installation see: https://docs.helm.sh/using_helm/#securing-your-helm-installation
## Happy Helming!

helm version
## Client: &amp;version.Version{SemVer:&quot;v2.10.0&quot;, GitCommit:&quot;9ad53aac42165a5fadc6c87be0dea6b115f93090&quot;, GitTreeState:&quot;clean&quot;}
## Server: &amp;version.Version{SemVer:&quot;v2.10.0&quot;, GitCommit:&quot;9ad53aac42165a5fadc6c87be0dea6b115f93090&quot;, GitTreeState:&quot;clean&quot;}
</code></pre>

<h3 id="simulate-https-github-com-cisco-sso-mh-simulate-app-upgrades-or-simulate-install-of-apps-as-needed-the-deployment-of-kdf-apps-using-mh"><a href="https://github.com/cisco-sso/mh#simulate-app-upgrades-or-simulate-install-of-apps-as-needed">Simulate</a> the deployment of KDF apps using mh.</h3>

<pre><code class="language-bash">mh simulate --printRendered
## ...
</code></pre>

<h3 id="apply-https-github-com-cisco-sso-mh-apply-app-upgrades-or-install-apps-as-needed-the-deployment-of-kdf-apps-using-mh"><a href="https://github.com/cisco-sso/mh#apply-app-upgrades-or-install-apps-as-needed">Apply</a> the deployment of KDF apps using mh.</h3>

<pre><code class="language-bash">mh apply
## ...
</code></pre>

<h3 id="inspect-the-resulting-helm-releases">Inspect the resulting Helm releases.</h3>

<pre><code class="language-bash">helm ls
## NAME                   REVISION UPDATED                  STATUS   CHART                        APP VERSION NAMESPACE
## chaoskube              1        Thu Sep 27 15:37:53 2018 DEPLOYED chaoskube-0.8.0              0.8.0       default
## elasticsearch          1        Thu Sep 27 15:37:40 2018 DEPLOYED elasticsearch-1.4.0          6.3.1       default
## elasticsearch-exporter 1        Thu Sep 27 15:37:42 2018 DEPLOYED elasticsearch-exporter-0.2.0 1.0.2       default
## filebeat               1        Thu Sep 27 15:37:47 2018 DEPLOYED filebeat-0.6.0               6.3.1       default
## grafana                1        Thu Sep 27 15:37:51 2018 DEPLOYED grafana-1.13.1               5.1.3       default
## kibana                 1        Thu Sep 27 15:37:45 2018 DEPLOYED kibana-0.8.0                 6.3.1       default
## nginx-ingress-external 1        Thu Sep 27 15:37:43 2018 DEPLOYED nginx-ingress-0.23.0         0.15.0      default
## prometheus             1        Thu Sep 27 15:37:48 2018 DEPLOYED prometheus-7.0.0             2.3.2       default
</code></pre>

<h3 id="use-the-watch-https-linux-die-net-man-1-watch-command-to-monitor-the-status">Use the <a href="https://linux.die.net/man/1/watch">watch</a> command to monitor the status.</h3>

<p>(Use <code>CTRL + c</code> to exit the watch command loop.)</p>

<pre><code class="language-bash">watch -n1 'kubectl get pod'
## Every 1.0s: kubectl get pod
##
## NAME                                                            READY     STATUS              RESTARTS   AGE
## chaoskube-chaoskube-7f5874cc98-nvksz                            0/1       ContainerCreating   0          9s
## elasticsearch-client-7cdc657767-p9kzq                           0/1       PodInitializing     0          22s
## elasticsearch-data-0                                            0/1       Init:1/2            0          22s
## elasticsearch-exporter-elasticsearch-exporter-659975bf4-b75sf   1/1       Running             0          20s
## elasticsearch-master-0                                          0/1       Init:0/2            0          22s
## filebeat-dvgd8                                                  0/1       ContainerCreating   0          15s
## grafana-599bd6c66-fqf98                                         0/1       Init:0/1            0          11s
## kibana-5f66c65c47-6nttz                                         0/1       ContainerCreating   0          17s
## nginx-ingress-external-controller-dd7775d7f-clflh               0/1       ContainerCreating   0          19s
## nginx-ingress-external-default-backend-744cd584cf-drxx9         0/1       ContainerCreating   0          19s
## prometheus-alertmanager-6bfdc4b7f4-4wtxl                        0/2       ContainerCreating   0          13s
## prometheus-kube-state-metrics-6584885ccf-l7lnz                  0/1       ContainerCreating   0          13s
## prometheus-node-exporter-zzz5b                                  0/1       ContainerCreating   0          13s
## prometheus-pushgateway-d5fdc4f5b-wjzdt                          0/1       ContainerCreating   0          13s
## prometheus-server-5c969bc49c-jm9fl                              0/2       PodInitializing     0          13s
</code></pre>

<h3 id="you-should-soon-see-that-all-pods-are-running-and-ready">You should soon see that all pods are running and ready.</h3>

<pre><code class="language-bash">## Every 1.0s: kubectl get pod
##
## NAME                                                            READY     STATUS    RESTARTS   AGE
## chaoskube-chaoskube-7f5874cc98-nvksz                            1/1       Running   0          21m
## elasticsearch-client-7cdc657767-p9kzq                           1/1       Running   0          21m
## elasticsearch-data-0                                            1/1       Running   0          21m
## elasticsearch-exporter-elasticsearch-exporter-659975bf4-b75sf   1/1       Running   0          21m
## elasticsearch-master-0                                          1/1       Running   0          21m
## elasticsearch-master-1                                          1/1       Running   0          18m
## filebeat-dvgd8                                                  1/1       Running   0          21m
## grafana-599bd6c66-fqf98                                         1/1       Running   0          21m
## kibana-5f66c65c47-6nttz                                         1/1       Running   0          21m
## nginx-ingress-external-controller-dd7775d7f-clflh               1/1       Running   0          21m
## nginx-ingress-external-default-backend-744cd584cf-drxx9         1/1       Running   0          21m
## prometheus-alertmanager-6bfdc4b7f4-4wtxl                        2/2       Running   0          21m
## prometheus-kube-state-metrics-6584885ccf-l7lnz                  1/1       Running   0          21m
## prometheus-node-exporter-zzz5b                                  1/1       Running   0          21m
## prometheus-pushgateway-d5fdc4f5b-wjzdt                          1/1       Running   0          21m
## prometheus-server-5c969bc49c-jm9fl                              2/2       Running   0          21m
</code></pre>

<h3 id="get-a-list-of-kubernetes-ingress-https-kubernetes-io-docs-concepts-services-networking-ingress-resources">Get a list of <a href="https://kubernetes.io/docs/concepts/services-networking/ingress/">Kubernetes Ingress</a> resources.</h3>

<pre><code class="language-bash">kubectl get ingress
## NAME                      HOSTS                                         ADDRESS     PORTS     AGE
## grafana                   grafana.docker-for-desktop.example.org        localhost   80        21m
## kibana                    kibana.docker-for-desktop.example.org         localhost   80        21m
## prometheus-alertmanager   alertmanager.docker-for-desktop.example.org   localhost   80        21m
## prometheus-pushgateway    pushgateway.docker-for-desktop.example.org    localhost   80        21m
## prometheus-server         prometheus.docker-for-desktop.example.org     localhost   80        21m
</code></pre>

<h3 id="http-get-an-api-behind-a-kubernetes-ingress-resource">HTTP GET an API behind a Kubernetes Ingress resource.</h3>

<p>This <a href="https://curl.haxx.se/">curl</a> call performs an HTTP GET against the <a href="https://prometheus.io/docs/prometheus/latest/querying/api/">Prometheus API</a> the <a href="https://github.com/kubernetes/ingress-nginx">nginx-ingess</a>. Note how the host header is used for ingress routing.</p>

<pre><code class="language-bash">curl -fsSL \
  --header 'Host: prometheus.docker-for-desktop.example.org' \
  http://host.docker.internal/api/v1/label/__name__/values \
  | jq '.status'
## &quot;success&quot;
</code></pre>

<p>It is also possible to visit ingress endpoints in the broswer on your host machine. However, you&rsquo;ll need to include
<a href="https://en.wikipedia.org/wiki/Hosts_(file)">hosts</a> file lines to ensure the ingress host names resolve properly to
<code>127.0.0.1</code>. We plan to add documentation to simplify and clarify how this is done.</p>


			<aside class="copyright" role="note">
				
				&copy; 2018 Released under the Apache-2.0 license &ndash;
				
				Documentation built with
				<a href="https://www.gohugo.io" target="_blank">Hugo</a>
				using the
				<a href="http://github.com/digitalcraftsman/hugo-material-docs" target="_blank">Material</a> theme.
			</aside>

			<footer class="footer">
				

<nav class="pagination" aria-label="Footer">
  <div class="previous">
  
  </div>

  <div class="next">
  
      <a href="https://kdf.csco.cloud/getting-started/readfiles/framework-deploy-note/" title="">
        <span class="direction">
          Next
        </span>
        <div class="page">
          <div class="stretch">
            <div class="title">
              
            </div>
          </div>
          <div class="button button-next" role="button" aria-label="Next">
            <i class="icon icon-forward"></i>
          </div>
        </div>
      </a>
  
  </div>
</nav>





			</footer>
		</div>
	</article>

	<div class="results" role="status" aria-live="polite">
		<div class="scrollable">
			<div class="wrapper">
				<div class="meta"></div>
				<div class="list"></div>
			</div>
		</div>
	</div>
</main>

    <script>
    
      var base_url = 'https:\/\/kdf.csco.cloud\/';
      var repo_id  = 'cisco-sso\/kdf';
    
    </script>

    <script src="https://kdf.csco.cloud/javascripts/application.js"></script>
    
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    

    <script>
      /* Add headers to scrollspy */
      var headers   = document.getElementsByTagName("h2");
      var scrollspy = document.getElementById('scrollspy');

      if(scrollspy) {
        if(headers.length > 0) {
          for(var i = 0; i < headers.length; i++) {
            var li = document.createElement("li");
            li.setAttribute("class", "anchor");

            var a  = document.createElement("a");
            a.setAttribute("href", "#" + headers[i].id);
            a.setAttribute("title", headers[i].innerHTML);
            a.innerHTML = headers[i].innerHTML;

            li.appendChild(a)
            scrollspy.appendChild(li);
          }
        } else {
          scrollspy.parentElement.removeChild(scrollspy)
        }


        /* Add permanent link next to the headers */
        var headers = document.querySelectorAll("h1, h2, h3, h4, h5, h6");

        for(var i = 0; i < headers.length; i++) {
            var a = document.createElement("a");
            a.setAttribute("class", "headerlink");
            a.setAttribute("href", "#" + headers[i].id);
            a.setAttribute("title", "Permanent link")
            a.innerHTML = "#";
            headers[i].appendChild(a);
        }
      }
    </script>

    

    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.8.0/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
  </body>
</html>

